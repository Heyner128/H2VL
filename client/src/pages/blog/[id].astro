---
import fetchApi from '@/lib//strapi';
import type Article from '@/interfaces/article';

export async function getStaticPaths() {
  const articles = await fetchApi<Article[]>({
    endpoint: 'articles',
    query: {
      populate: '*'
    },
    wrappedByKey: 'data',
  });

  return articles.map((article) => ({
    params: { id: article.id },
    props: article,
  }));
}
type Props = Article;

const article: Props = Astro.props;

console.log(article)
---

<!DOCTYPE html>
<html lang="fr">
  <head>
    <title>{article.attributes.titre}</title>
  </head>

  <body>
    <main>
      <h1>{article.attributes.titre}</h1>
      <img src={import.meta.env.STRAPI_URL + article.attributes.image.data.attributes.url} />


      <p>{article.attributes.contenu}</p>
    </main>
  </body>
</html>